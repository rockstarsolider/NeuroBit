{% load static %}
{% load i18n %}
{% load render_bundle from webpack_loader %}

{% comment %} 
This base file is used in new pages. 
The other base file should be deleted before production
{% endcomment %}

<!DOCTYPE html>
<html lang="en" data-theme="light">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>{% block title %}{% endblock title %}</title>

        <script>
            (function () {
            const saved = localStorage.getItem('theme');
            if (saved) {
                document.documentElement.setAttribute('data-theme', saved);
            }
            /* If nothing saved yet you can also respect the user‚Äôs OS preference: */
            else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                localStorage.setItem('theme', saved);
                document.documentElement.setAttribute('data-theme', 'dark');
            }
            })();
        </script>

        {# ============ FONTS ============ #}
        <link rel="preconnect" href="https://fonts.googleapis.com"/>
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
        <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Syne:wght@600;700&family=Vazirmatn:wght@400;500;700&display=swap" rel="stylesheet"/>
        
        {# ============ ICON ============ #}
        <link rel="icon" type="image/png" href='{% static "images/yasanlogo.png" %}'/>
        
        {# ============ STYLE ============ #}
        {% render_bundle 'main' 'css' %}
        {% block extra_style %}{% endblock extra_style %}
    </head>
    <body>
        {# ============ HEADER ============ #}
        <header>
            <a href='{% url "home" %}' class="logo-square" aria-label="Home"><img src='{% static "images/neurobit_main_logo.webp" %}' alt=""><span data-i18n="logo_text" class="logo-text">neurobit</span></a>
            <nav class="desktop-nav">
            <a href="{% url "home" %}#manifesto" data-i18n="nav_manifesto">What Neurobit do?</a>
            <a href="{% url "home" %}#process" data-i18n="nav_process">Process</a>
            <a href='{% url "courses" %}' data-i18n="nav_learning_paths">Learning Paths</a>
            <a href='{% url "mentoring" %}' data-i18n="nav_mentorship">Mentorship</a>
            <a href='{% url "pricing" %}' data-i18n="nav_pricing">Prices</a>
            <a href='{% url "apply" %}'>
                <button class="btn-apply" data-i18n="nav_apply" onclick="document.getElementById('apply').scrollIntoView({behavior:'smooth'})">Apply</button>
            </a>
            <button id="langToggle" class="lang-toggle">FA</button>
            <button class="theme-toggle" aria-label="Switch theme"><span>üåô</span></button>
            </nav>
            <button class="menu-icon" id="openMenu" aria-label="Open menu"><span></span><span></span></button>
        </header>
        
        {# ============ MOBILE MENU ============ #}
        <div class="mobile-menu" id="mobileMenu" aria-hidden="true">
            <button class="close-btn" id="closeMenu" aria-label="Close menu">&times;</button>
            <div class="mobile-menu-inner">
            <div style="text-align: center;">
                <button  class="lang-toggle lang-btn-mobile" style="margin-left: 0;">FA</button>
                <button class="theme-toggle" aria-label="Switch theme"><span>üåô</span></button>
            </div>
            <a href="{% url "home" %}#manifesto" class="mobile-link" data-i18n="nav_manifesto">Manifesto</a>
            <a href="{% url "home" %}#process" class="mobile-link" data-i18n="nav_process">Process</a>
            <a href='{% url "courses" %}' class="mobile-link" data-i18n="nav_learning_paths">Learning Paths</a>
            <a href='{% url "mentoring" %}' class="mobile-link" data-i18n="nav_mentorship">Mentorship</a>
            <a href='{% url "pricing" %}' class="mobile-link" data-i18n="nav_pricing">Prices</a>
            <a href='{% url "apply" %}'>
                <button class="btn-apply mobile-apply" data-i18n="nav_apply"
                    onclick="document.getElementById('apply').scrollIntoView({behavior:'smooth'});document.getElementById('mobileMenu').classList.remove('open');">Apply</button>
            </a>
            </div>
        </div>

        
        {% block content %}{% endblock content %}            
        
        {# ============ FOOTER ============ #}
        <footer>
            <span data-i18n="footer_copy">¬© 2025 ‚Äì All rights neurobit-reserved.</span>
            <span data-i18n="footer_made">Crafted with ‚ù§Ô∏è for Iranian youth</span>
        </footer>
        
        {# ============ JS ============ #}
        {% render_bundle 'main' 'js' %}
        {% block extra_js %}{% endblock extra_js %}
    </body>
</html>
